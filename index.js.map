{"version":3,"file":"index.js","sources":["../src/js/home-hero.js","../src/js/home-filter.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\nconst orderNowButton = document.querySelector('.order-now-button');\nconst orderNowArea = document.querySelector('.order-now');\nconst closeButton = document.querySelector('.order-now-close-button');\n\nconst swiper = new Swiper('.swiper', {\n  slidesPerView: 'auto',\n  loop: true,\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n});\n\norderNowButton.addEventListener('click', () => {\n  orderNowArea.classList.add('show-order-now');\n});\ncloseButton.addEventListener('click', () => {\n  orderNowArea.classList.remove('show-order-now');\n});\n","import axios from 'axios';\n\nconst API_BASE = 'https://tasty-treats-backend.p.goit.global/api';\n\nconst categoryListEl = document.getElementById('category-list');\nconst allCategoriesBtn = document.querySelector('.all-categories-button');\nconst searchInput = document.getElementById('search-input');\nconst recipeGridEl = document.getElementById('recipe-grid');\nconst emptyRecipeGridEl = document.getElementById('empty-recipe-grid');\n\nconst resetBtn = document.getElementById('reset-button');\n\nconst timeSelect = document.getElementById('time-select');\nconst areaSelect = document.getElementById('area-select');\nconst ingredientSelect = document.getElementById('ingredient-select');\nconst paginationEl = document.getElementById('pagination');\n\nlet selectedCategory = null;\nlet searchQuery = '';\nlet selectedTime = '';\nlet selectedArea = '';\nlet selectedIngredient = '';\nlet currentPage = 1;\nconst recipesPerPage = 9;\n\n// Favoriler (LS)\nlet favorites = [];\n\nfunction getIdSafe(obj) {\n  return obj?._id || obj?.id || obj?.recipeId || '';\n}\n\nfunction isInFavorites(id) {\n  const target = String(id);\n  return favorites.some(item => String(getIdSafe(item)) === target);\n}\n\nfunction saveFavoritesToLocalStorage() {\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n}\n\nfunction loadFavoritesFromLocalStorage() {\n  const favs = localStorage.getItem('favorites');\n  if (favs) {\n    try {\n      const favArray = JSON.parse(favs);\n      favorites = Array.isArray(favArray) ? favArray : [];\n    } catch {\n      localStorage.removeItem('favorites');\n      favorites = [];\n    }\n  } else {\n    favorites = [];\n  }\n}\n\n/* --- EKLENDİ: Favori kaydı normalize (mutlaka _id olsun) --- */\nfunction makeFavoritePayload(src) {\n  const _id = String(getIdSafe(src) || '');\n  return {\n    ...src,\n    _id,\n    title: src?.title || '',\n    description: src?.description || '',\n    rating: Number(src?.rating) || 0,\n    preview:\n      src?.preview || src?.thumb || src?.image_url || src?.imageUrl || '',\n    category:\n      typeof src?.category === 'string'\n        ? { name: src.category }\n        : src?.category?.name\n        ? src.category\n        : src?.category || {},\n  };\n}\n\nasync function loadCategories() {\n  try {\n    const res = await axios.get(`${API_BASE}/categories`);\n    const categories = res.data;\n    categoryListEl.innerHTML = '';\n\n    categories.forEach(cat => {\n      const li = document.createElement('li');\n      const btn = document.createElement('button');\n      btn.textContent = cat.name;\n      btn.classList.add('category-btn');\n      btn.addEventListener('click', () => {\n        selectedCategory = cat.name;\n        currentPage = 1;\n        updateCategoryActive();\n        fetchAndRenderRecipes();\n      });\n      li.appendChild(btn);\n      categoryListEl.appendChild(li);\n    });\n  } catch (err) {\n    console.error('Kategori yüklenirken hata:', err);\n  }\n}\n\nfunction updateCategoryActive() {\n  allCategoriesBtn.classList.remove('active');\n  categoryListEl\n    .querySelectorAll('li')\n    .forEach(li => li.classList.remove('active'));\n\n  if (selectedCategory === null) {\n    allCategoriesBtn.classList.add('active');\n  } else {\n    categoryListEl.querySelectorAll('li').forEach(li => {\n      const btn = li.querySelector('button');\n      if (btn.textContent === selectedCategory) {\n        li.classList.add('active');\n      }\n    });\n  }\n}\n\nallCategoriesBtn.addEventListener('click', () => {\n  selectedCategory = null;\n  currentPage = 1;\n  updateCategoryActive();\n  fetchAndRenderRecipes();\n});\n\nsearchInput.addEventListener('input', () => {\n  searchQuery = searchInput.value.trim();\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nresetBtn.addEventListener('click', () => {\n  selectedCategory = null;\n  searchQuery = '';\n  selectedTime = '';\n  selectedArea = '';\n  selectedIngredient = '';\n  searchInput.value = '';\n  timeSelect.value = '';\n  areaSelect.value = '';\n  ingredientSelect.value = '';\n  currentPage = 1;\n  updateCategoryActive();\n  fetchAndRenderRecipes();\n});\n\ntimeSelect.addEventListener('change', () => {\n  selectedTime = timeSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nareaSelect.addEventListener('change', () => {\n  selectedArea = areaSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\ningredientSelect.addEventListener('change', () => {\n  selectedIngredient = ingredientSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nfunction fillTimeOptions() {\n  const times = [15, 30, 45, 60, 90, 120];\n  timeSelect.innerHTML = `<option value=\"\">All times</option>`;\n  times.forEach(t => {\n    const option = document.createElement('option');\n    option.value = t;\n    option.textContent = `${t} minutes`;\n    timeSelect.appendChild(option);\n  });\n}\n\nasync function fillAreaOptions() {\n  try {\n    const res = await axios.get(`${API_BASE}/areas`);\n    const areas = res.data;\n    areaSelect.innerHTML = `<option value=\"\">All areas</option>`;\n    areas.forEach(area => {\n      const option = document.createElement('option');\n      option.value = area.name;\n      option.textContent = area.name;\n      areaSelect.appendChild(option);\n    });\n  } catch (err) {\n    console.error('Area options yüklenirken hata:', err);\n  }\n}\n\nasync function fillIngredientOptions() {\n  try {\n    const res = await axios.get(`${API_BASE}/ingredients`);\n    const ingredients = res.data;\n    ingredientSelect.innerHTML = `<option value=\"\">All ingredients</option>`;\n    ingredients.forEach(ing => {\n      const option = document.createElement('option');\n      option.value = ing._id;\n      option.textContent = ing.name;\n      ingredientSelect.appendChild(option);\n    });\n  } catch (err) {\n    console.error('Ingredient options yüklenirken hata:', err);\n  }\n}\n\nasync function fetchAndRenderRecipes(page = 1) {\n  currentPage = page;\n  recipeGridEl.innerHTML = 'Loading...';\n\n  try {\n    const params = {\n      page: currentPage,\n      limit: recipesPerPage,\n    };\n    if (selectedCategory) params.category = selectedCategory;\n    if (searchQuery) params.title = searchQuery;\n    if (selectedTime) params.time = selectedTime;\n    if (selectedArea) params.area = selectedArea;\n    if (selectedIngredient) params.ingredient = selectedIngredient;\n\n    const res = await axios.get(`${API_BASE}/recipes`, { params });\n    const recipes = res.data.results || [];\n    const totalPages = res.data.totalPages || 1;\n\n    if (!recipes.length) {\n      recipeGridEl.innerHTML = '';\n      emptyRecipeGridEl.innerHTML = `<svg\n        class=\"icon-empty-recipes\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 97 83\"\n        width=\"97\"\n        height=\"83\"\n      >\n        <use href=\"./svg/symbol-defs.svg#icon-empty-recipes\"></use>\n        </svg>\n        <p>No recipes found.</p>`;\n      paginationEl.innerHTML = '';\n      return;\n    }\n    emptyRecipeGridEl.innerHTML = '';\n    renderRecipes(recipes);\n\n    // İlk çizimde görünen kalpleri LS ile eşitle\n    refreshAllVisibleHearts();\n\n    renderPagination(totalPages, currentPage);\n  } catch (err) {\n    console.error('Tarifler yüklenirken hata:', err);\n    recipeGridEl.innerHTML = '<p>Error loading recipes.</p>';\n    paginationEl.innerHTML = '';\n  }\n}\n\nfunction renderRating(rating) {\n  let str = '';\n  for (let i = 0; i < 5; i++) {\n    if (i < parseInt(rating)) {\n      str += ` <svg\n        class=\"icon-yellow-star\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n      >\n        <use href=\"./svg/symbol-defs.svg#icon-yellow-star\"></use>\n        </svg>`;\n    } else {\n      str += ` <svg\n        class=\"icon-empty-star\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n      >\n        <use href=\"./svg/symbol-defs.svg#icon-empty-star\"></use>\n        </svg>`;\n    }\n  }\n  return str;\n}\n\n/* === FAVORI KALP IKONLARI (inline SVG, tema bağımsız) === */\nfunction renderFavoriteIcon(id) {\n  const fav = isInFavorites(id);\n\n  if (fav) {\n    // DOLU: tamamen beyaz\n    return `\n      <svg class=\"icon-heart-full\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\">\n        <path\n          d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41.81 4.5 2.09C12.09 4.81 13.76 4 15.5 4 18 4 20 6 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"\n          fill=\"#fff\" stroke=\"none\"></path>\n      </svg>`;\n  }\n\n  // BOŞ: iç boyamasız, beyaz kontur\n  return `\n    <svg class=\"icon-heart-outline\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\">\n      <path\n        d=\"M12.1 21.3l-.1.1-.1-.1C6.14 16.24 3 13.39 3 9.88 3 7.5 4.99 5.5 7.37 5.5c1.52 0 2.99.72 3.88 1.86.89-1.14 2.36-1.86 3.88-1.86C18.51 5.5 20.5 7.5 20.5 9.88c0 3.51-3.14 6.36-8.4 11.42z\"\n        fill=\"none\" stroke=\"#fff\" stroke-width=\"1.8\"\n        stroke-linecap=\"round\" stroke-linejoin=\"round\"\n        vector-effect=\"non-scaling-stroke\"></path>\n    </svg>`;\n}\n\n// --- tek butonun kalbini yenile\nfunction refreshHeartById(id) {\n  const safeId = String(id);\n  const btn = document.getElementById(`favorite-button-${safeId}`);\n  if (!btn) return;\n  btn.innerHTML = renderFavoriteIcon(safeId);\n}\n\n// --- görünür tüm kalpleri LS'e göre eşitle\nfunction refreshAllVisibleHearts() {\n  const btns = document.querySelectorAll(\n    '.favorite-btn[id^=\"favorite-button-\"]'\n  );\n  if (!btns.length) return;\n  btns.forEach(btn => {\n    const rid = btn.id.replace('favorite-button-', '');\n    btn.innerHTML = renderFavoriteIcon(rid);\n  });\n}\n\nfunction getRecipeIdSafe(r) {\n  return r?._id || r?.id;\n}\n\nfunction renderRecipes(recipes) {\n  recipeGridEl.innerHTML = '';\n  recipes.forEach(recipe => {\n    const card = document.createElement('div');\n    card.className = 'home-recipe-card';\n\n    const imageUrl =\n      recipe.thumb || 'https://via.placeholder.com/280x180?text=No+Image';\n    card.style.backgroundImage = `linear-gradient(0.94deg, rgba(5, 5, 5, 0.6) 4.82%, rgba(5, 5, 5, 0.5) 18.72%), url(${imageUrl})`;\n\n    const ratingValue = parseFloat(recipe.rating).toFixed(1);\n\n    card.innerHTML = `\n     <button id='favorite-button-${recipe._id}' class=\"favorite-btn\">\n       ${renderFavoriteIcon(recipe._id)}\n     </button>\n     \n      <div class=\"home-recipe-card-bottom\">\n        <div class=\"home-recipe-card-desc\">\n            <h3>${recipe.title}</h3>\n            <p>${recipe.description || ''}</p>\n        </div>\n     \n        <div class=\"home-recipe-card-button\">\n            <div class=\"stars\">\n                <div class=\"floatCount\">\n                ${ratingValue}\n                </div>\n                ${renderRating(ratingValue)}\n            </div>\n            <button class=\"see-recipe-btn\">See Recipe</button>\n       </div>\n      </div>\n    `;\n\n    // Favori butonu: tıklamada sadece favoriyi değiştir (LS + ikon)\n    const favBtn = card.querySelector('.favorite-btn');\n    favBtn.addEventListener('click', ev => {\n      ev.preventDefault();\n      ev.stopPropagation(); // kart/popup click'ine bulaşmasın\n      toggleFavorite(recipe); // LS'e ekle/çıkar + ikon güncelle (ve gerekiyorsa refresh)\n    });\n\n    // Popup açma\n    card.querySelector('.see-recipe-btn').addEventListener('click', () => {\n      const id = getRecipeIdSafe(recipe);\n      if (typeof window.openPopup === 'function') {\n        window.openPopup(id || recipe);\n      } else {\n        console.error('⚠️ openPopup fonksiyonu tanımlı değil!');\n      }\n    });\n\n    recipeGridEl.appendChild(card);\n  });\n}\n\nexport function toggleFavorite(recipe, byPassLocalSave = false) {\n  // her tıklamada en güncel LS'i baz al\n  loadFavoritesFromLocalStorage();\n\n  const id = String(getIdSafe(recipe));\n  const wasFavorite = isInFavorites(id);\n\n  if (wasFavorite) {\n    favorites = favorites.filter(item => String(getIdSafe(item)) !== id);\n  } else {\n    // 🔧 EKLEME: normalize ederek kaydet (_id garanti)\n    favorites.push(makeFavoritePayload(recipe));\n  }\n\n  const favoriteButton = document.getElementById(`favorite-button-${id}`);\n  if (favoriteButton) {\n    favoriteButton.innerHTML = renderFavoriteIcon(id); // ikon renk/çizgi doğru kalır\n  }\n\n  if (!byPassLocalSave) saveFavoritesToLocalStorage();\n\n  // favorites sayfaları için yayın\n  window.dispatchEvent(new Event('favorites:updated'));\n  document.dispatchEvent(new Event('favorites:updated'));\n\n  /* === İSTEDİĞİN REFRESH DAVRANIŞI ===\n     - home-filter.html: sadece EKLEME olduğunda (wasFavorite === false) sayfayı yenile\n     - favorites-filter.html: ekleme/çıkarma fark etmeden yenile\n  */\n  const path = (window.location && window.location.pathname) || '';\n  if (!wasFavorite && path.includes('home-filter.html')) {\n    window.location.reload();\n  }\n  if (path.includes('favorites-filter.html')) {\n    window.location.reload();\n  }\n}\n\nfunction renderPagination(totalPages, currentPage) {\n  paginationEl.innerHTML = '';\n\n  const createBtn = (\n    text,\n    page,\n    disabled = false,\n    active = false,\n    className = ''\n  ) => {\n    const btn = document.createElement('button');\n    btn.innerHTML = text;\n    btn.className = className;\n    if (active) btn.classList.add('active');\n    if (disabled) btn.classList.add('disabled');\n    btn.disabled = disabled;\n    btn.addEventListener('click', () => {\n      if (!disabled) fetchAndRenderRecipes(page);\n    });\n    return btn;\n  };\n\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-left-arrow-1 double\"\n            viewBox=\"0 0 48 48\"\n        >\n            <use href=\"./svg/symbol-defs.svg#icon-left-arrow-1\" transform=\"translate(-7, 0)\"></use>\n            <use href=\"./svg/symbol-defs.svg#icon-left-arrow-1\" transform=\"translate(20, 0)\"></use>\n        </svg>`,\n      1,\n      currentPage === 1,\n      false,\n      'page-arrow-icon'\n    )\n  );\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-left-arrow-1\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"./svg/symbol-defs.svg#icon-left-arrow-1\"></use>\n        </svg>`,\n      currentPage - 1,\n      currentPage === 1,\n      false,\n      'page-arrow-icon'\n    )\n  );\n\n  for (let i = 1; i <= totalPages; i++) {\n    if (i === 1 || i === totalPages || Math.abs(currentPage - i) <= 1) {\n      paginationEl.appendChild(createBtn(i, i, false, currentPage === i));\n    } else if (\n      (i === 2 && currentPage > 3) ||\n      (i === totalPages - 1 && currentPage < totalPages - 2)\n    ) {\n      const dots = document.createElement('span');\n      dots.textContent = '...';\n      dots.classList.add('dots');\n      paginationEl.appendChild(dots);\n    }\n  }\n\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-right-arrow-1\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"./svg/symbol-defs.svg#icon-right-arrow-1\"></use>\n        </svg>`,\n      currentPage + 1,\n      currentPage === totalPages,\n      false,\n      'page-arrow-icon'\n    )\n  );\n  paginationEl.appendChild(\n    createBtn(\n      `<span><svg\n            class=\"icon-right-arrow-1 double\"\n            viewBox=\"0 0 48 48\"\n        >\n            <use href=\"./svg/symbol-defs.svg#icon-right-arrow-1\" transform=\"translate(-7, 0)\"></use>\n            <use href=\"./svg/symbol-defs.svg#icon-right-arrow-1\" transform=\"translate(20, 0)\"></use>\n        </svg></span>`,\n      totalPages,\n      currentPage === totalPages,\n      false,\n      'page-arrow-icon'\n    )\n  );\n}\n\nasync function loadPopularRecipes() {\n  try {\n    const response = await axios.get(`${API_BASE}/recipes/popular`);\n    const recipes = response.data;\n    const popularList = document.querySelector('#popular-list');\n    popularList.innerHTML = '';\n\n    recipes.forEach(recipe => {\n      const li = document.createElement('li');\n      li.classList.add('popular-card');\n\n      const image =\n        recipe.preview ||\n        recipe.thumb ||\n        'https://via.placeholder.com/100x70?text=No+Image';\n      const title = recipe.title || 'Untitled';\n      const description =\n        recipe.description || recipe.instructions || 'No description available';\n\n      li.className = 'popular-card';\n      li.innerHTML = `\n  <img src=\"${image}\" alt=\"${title}\" />\n  <div class=\"popular-card-info\">\n    <h4 class=\"popular-card-title\" >${title}</h4>\n    <p class=\"popular-card-desc\">${description}</p>\n  </div>\n`;\n\n      li.addEventListener('click', () => {\n        const id = getRecipeIdSafe(recipe);\n        if (typeof window.openPopup === 'function') {\n          window.openPopup(id || recipe);\n        } else {\n          console.error('⚠️ openPopup fonksiyonu tanımlı değil!');\n        }\n      });\n\n      popularList.appendChild(li);\n    });\n  } catch (error) {\n    console.error('Popüler tarifler alınamadı:', error);\n  }\n}\n\n/* --- popup'tan tek-id güncelleme + dış senk --- */\nwindow.addEventListener('favorites:sync', e => {\n  const id = e?.detail?.id;\n  if (!id) return;\n  loadFavoritesFromLocalStorage();\n  refreshHeartById(id);\n});\nwindow.addEventListener('favorites:updated', () => {\n  loadFavoritesFromLocalStorage();\n  refreshAllVisibleHearts();\n});\nwindow.addEventListener('storage', e => {\n  if (e.key === 'favorites') {\n    loadFavoritesFromLocalStorage();\n    refreshAllVisibleHearts();\n  }\n});\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  loadFavoritesFromLocalStorage();\n\n  selectedCategory = null;\n  selectedTime = '';\n  selectedArea = '';\n  selectedIngredient = '';\n  updateCategoryActive();\n  await loadCategories();\n  fillTimeOptions();\n  await fillAreaOptions();\n  await fillIngredientOptions();\n  await fetchAndRenderRecipes();\n  await loadPopularRecipes();\n});\n"],"names":["orderNowButton","orderNowArea","closeButton","Swiper","API_BASE","categoryListEl","allCategoriesBtn","searchInput","recipeGridEl","emptyRecipeGridEl","resetBtn","timeSelect","areaSelect","ingredientSelect","paginationEl","selectedCategory","searchQuery","selectedTime","selectedArea","selectedIngredient","currentPage","recipesPerPage","favorites","getIdSafe","obj","isInFavorites","id","target","item","saveFavoritesToLocalStorage","loadFavoritesFromLocalStorage","favs","favArray","makeFavoritePayload","src","_id","_a","loadCategories","categories","axios","cat","li","btn","updateCategoryActive","fetchAndRenderRecipes","err","fillTimeOptions","times","option","fillAreaOptions","areas","area","fillIngredientOptions","ingredients","ing","page","params","res","recipes","totalPages","renderRecipes","refreshAllVisibleHearts","renderPagination","renderRating","rating","str","i","renderFavoriteIcon","refreshHeartById","safeId","btns","rid","getRecipeIdSafe","r","recipe","card","imageUrl","ratingValue","ev","toggleFavorite","byPassLocalSave","wasFavorite","favoriteButton","path","createBtn","text","disabled","active","className","dots","loadPopularRecipes","popularList","image","title","description","error"],"mappings":"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"}