import"./assets/popup_menu-Um5uhqew.js";const N="./img/icons.svg";function k(e,t=""){const r=`${N}#icon-${e}`;return`<svg class="icon ${t}" aria-hidden="true" focusable="false">
    <use href="${r}" xlink:href="${r}"></use>
  </svg>`}function y(){const e=document.querySelector(".category-wrapper");if(!e)return;const t=e.closest(".container")||document.querySelector(".favorites-filter .container")||document.querySelector(".container");if(!t)return;const r=window.innerWidth,a=t.getBoundingClientRect(),c=window.getComputedStyle(t),u=parseFloat(c.paddingLeft)||0;let n=a.left+u,s=r-n;n=Math.max(0,Math.round(n)),s=Math.max(0,Math.round(s)),e.style.marginLeft="0",e.style.marginRight="0",e.style.maxWidth="none",e.style.width=`${s}px`,e.style.boxSizing="border-box",e.style.position="relative",e.style.transform=`translateX(${n}px)`}let $;function H(){clearTimeout($),$=setTimeout(y,80)}window.addEventListener("load",y);window.addEventListener("resize",H);const S="BroadcastChannel"in window?new BroadcastChannel("favorites"):null;function R(){window.dispatchEvent(new Event("favorites:updated")),S&&S.postMessage({type:"favorites:updated",at:Date.now()});try{typeof window.renderAll=="function"&&window.renderAll()}catch{}}function C(){try{const e=JSON.parse(localStorage.getItem("favorites"));return Array.isArray(e)?e:[]}catch{return[]}}function F(e){localStorage.setItem("favorites",JSON.stringify(e||[])),R()}function A(e){return(e==null?void 0:e._id)||(e==null?void 0:e.id)}const q=e=>(e??"").toString().replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]);function _(e=0,{max:t=5,fillEmpty:r=!1}={}){const a=Math.max(0,Math.min(t,Math.floor(Number(e)||0))),c=Array.from({length:a}).map(()=>k("Star","star-icon")).join("");if(!r)return c;const u=Math.max(0,t-a),n=Array.from({length:u}).map(()=>k("Star-empty","star-icon empty")).join("");return`${c}${n}`}function T(){const e=window.innerWidth;return e<768?9:(e<1280,12)}function W(e,t){return t<=2?[1,t]:e>=t-1?[t-1,t]:e<=1?[1,2]:[e,e+1]}const i={currentPage:1,currentCategory:"All",recipesPerPage:T(),isLoading:!1};window.addEventListener("resize",()=>{i.recipesPerPage=T(),w()});function z(e){return[...new Set((e||[]).map(t=>{var r;return((r=t==null?void 0:t.category)==null?void 0:r.name)||(t==null?void 0:t.category)||"Uncategorized"}))]}const f=document.getElementById("favorites-list"),m=document.getElementById("empty-message"),E=document.getElementById("category-list"),h=document.getElementById("all-categories-btn"),d=document.querySelector(".category-wrapper");let l=null;function j(){return l||(l=document.createElement("div"),l.id="loading-message",l.textContent="Loading…",l.style.textAlign="center",l.style.margin="24px auto",l.style.fontWeight="600",l.style.opacity="0.8",f==null||f.insertAdjacentElement("beforebegin",l)),l}function D(){i.isLoading=!0,j().style.display="block",m==null||m.classList.add("hidden");const e=x();e&&(e.style.display="none"),f&&(f.innerHTML=""),d&&(d.style.display="none")}function M(){i.isLoading=!1,l&&(l.style.display="none")}function x(){let e=document.getElementById("pagination-container");return e||(e=document.querySelector(".pagination")),e}function I(){return f&&m&&E&&h}function O(e){if(!I())return;if(!e||e.length===0){d&&(d.style.display="none"),E.innerHTML="",h&&h.classList.remove("active");return}else d&&(d.style.display="");E.innerHTML="";const t=()=>{document.querySelectorAll(".category").forEach(r=>r.classList.remove("active")),i.currentCategory==="All"?h.classList.add("active"):h.classList.remove("active")};h.onclick=()=>{i.currentCategory="All",i.currentPage=1,t(),g()},z(e).forEach(r=>{const a=document.createElement("button");a.className="category",a.textContent=r,r===i.currentCategory&&a.classList.add("active"),a.addEventListener("click",()=>{i.currentCategory=r,i.currentPage=1,t(),a.classList.add("active"),g()}),E.appendChild(a)}),t(),y()}function J(e){const t=x();if(!t)return;if(!Number.isFinite(e)||e<=1){t.style.display="none";return}t.style.display="flex";const r=t.querySelector(".page-icon.first"),a=t.querySelector(".page-icon.prev"),c=t.querySelector(".page-icon.next"),u=t.querySelector(".page-icon.last"),n=t.querySelector(".page-numbers"),s=i.currentPage===1,b=i.currentPage===e;r&&(r.disabled=s),a&&(a.disabled=s),c&&(c.disabled=b),u&&(u.disabled=b);const[L,P]=W(i.currentPage,e),v=document.createDocumentFragment();if(L>1){const o=document.createElement("button");o.className="dots",o.textContent="…",o.disabled=!0,v.appendChild(o)}for(let o=L;o<=P;o++){const p=document.createElement("button");p.type="button",p.textContent=String(o),o===i.currentPage&&p.classList.add("active"),p.addEventListener("click",()=>{i.currentPage!==o&&(i.currentPage=o,g())}),v.appendChild(p)}if(P<e){const o=document.createElement("button");o.className="dots",o.textContent="…",o.disabled=!0,v.appendChild(o)}n&&(n.innerHTML="",n.appendChild(v)),r&&(r.onclick=()=>{r.disabled||(i.currentPage=1,g())}),a&&(a.onclick=()=>{a.disabled||(i.currentPage=Math.max(1,i.currentPage-1),g())}),c&&(c.onclick=()=>{c.disabled||(i.currentPage=Math.min(e,i.currentPage+1),g())}),u&&(u.onclick=()=>{u.disabled||(i.currentPage=e,g())})}function g(){if(!I())return;if(i.isLoading){const n=x();n&&(n.style.display="none"),f.innerHTML="",m.classList.add("hidden");return}const e=C(),t=x();if(!e||e.length===0){f.innerHTML="",m.classList.remove("hidden"),t&&(t.style.display="none"),d&&(d.style.display="none");return}m.classList.add("hidden");const r=i.currentCategory==="All"?e:e.filter(n=>{var s;return(((s=n==null?void 0:n.category)==null?void 0:s.name)||(n==null?void 0:n.category)||"Uncategorized")===i.currentCategory});if(r.length===0){f.innerHTML='<p style="text-align:center;">No recipes in this category.</p>',t&&(t.style.display="none"),d&&(d.style.display="");return}const a=Math.max(1,Math.ceil(r.length/i.recipesPerPage));i.currentPage>a&&(i.currentPage=a);const c=(i.currentPage-1)*i.recipesPerPage,u=r.slice(c,c+i.recipesPerPage);f.innerHTML="",u.forEach(n=>{const s=document.createElement("div");s.className="recipe-card";const b=n.preview||n.thumb||n.image_url||"";s.style.backgroundImage=b?`url('${b}')`:"none",s.innerHTML=`
      <div class="recipe-overlay"></div>
      <div class="heart" data-id="${A(n)??""}">
        ${k("heart")}
      </div>
      <div class="recipe-card-content">
        <h4>${q(n.title)}</h4>
        <p>${q(n.description||"Açıklama bulunamadı.")}</p>
        <div class="recipe-meta">
          <span class="star-group">
            ${Number(n.rating??0).toFixed(2)}
            <span class="star-icon">
              ${_(n.rating)}
            </span>
          </span>
          <button class="secondary-button see-recipe-btn">See recipe</button>
        </div>
      </div>
    `;const L=s.querySelector(".heart");L&&L.addEventListener("click",()=>{const v=String(A(n)),o=C(),p=o.findIndex(B=>String(A(B))===v);p!==-1&&(o.splice(p,1),F(o))});const P=s.querySelector(".see-recipe-btn");P&&P.addEventListener("click",()=>{typeof window.openPopup=="function"?window.openPopup(n):console.error("❌ window.openPopup bulunamadı. popup_menu.js yüklendi mi?")}),f.appendChild(s)}),d&&(d.style.display=""),J(a),y()}function w(){const e=C();O(e),g()}window.renderAll=w;window.addEventListener("load",()=>{if(!I()){console.warn("⚠️ Gerekli DOM elemanları bulunamadı.");return}D(),g();let e=0;const t=setInterval(()=>{const r=C().length>0;e++,(r||e>10)&&(clearInterval(t),M(),w(),y())},500)});window.addEventListener("storage",e=>{e.key==="favorites"&&(M(),w(),y())});window.addEventListener("favorites:updated",()=>{M(),w(),y()});S&&(S.onmessage=e=>{var t;((t=e.data)==null?void 0:t.type)==="favorites:updated"&&(M(),w(),y())});
//# sourceMappingURL=favorites.js.map
